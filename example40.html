<html ng-app="countryApp">
  <head>
    <meta charset="utf-8">
    <title>Example 33</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.10/angular-route.min.js"></script>
    <script>

      var countryApp = angular.module('countryApp', ['ngRoute']);

      countryApp.config(function($routeProvider){
        $routeProvider.
        when('/',{
          templateUrl: 'countrylist_modified.html',
          controller:'CountryListCtrl'
        }).
        when('/:countryName',{
          templateUrl:'countryudetail_modified.html',
          controller:'CountryDetailCtrl'
        }).
        otherwise({
          redirectTo: '/'
        });
      });

      countryApp.factory('countries',function($http){
        return{
            list:function(callback){
          $http.get('countriesgdp.json').success(callback);
        }
      };
      });

      countryApp.controller('CountryListCtrl',function($scope ,countries){
        countries.list(function(countries){
          $scope.countries=countries;
        });
      });



      countryApp.controller('CountryDetailCtrl',function($scope,$routeParams,$http){
       $scope.name = $routeParams.countryName;

      $http.get('countriesgdp.json').success(function(data) {
              $scope.country=data.filter(function (entry) {
              return entry.name === $routeParams.countryName;
              })[0];
               console.log(country);
      });
       
      });
    </script>
  </head>
  <body >
    <div ng-view></div>
  </body>
</html>